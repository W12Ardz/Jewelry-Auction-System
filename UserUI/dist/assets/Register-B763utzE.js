import{r as l,d as x,j as e,Q as N,B as u}from"./index-Bvu6Xm-K.js";import{a as j}from"./userService-DzUxTQAM.js";const y=()=>{const[s,p]=l.useState({username:"",password:"",confirmPassword:"",fullName:"",phone:"",email:"",address:""}),[o,t]=l.useState(null),[h,m]=l.useState(""),g=x();function d(){let a=document.getElementById("pwd").value,r=document.getElementById("confirmPassword").value;return a!==r?(document.getElementById("passwordMsg").innerHTML="Incorrect confirm password!",!1):(document.getElementById("passwordMsg").innerHTML="",!0)}function i(){let a=document.getElementById("phone").value;return/^\d*$/.test(a)&&a.length<=10?(document.getElementById("phoneMsg").innerHTML="",!0):(document.getElementById("phoneMsg").innerHTML="Please enter a valid phone number",!1)}const n=a=>{const r=a.target.name;let c=a.target.value;r==="phone"&&(/^\d*$/.test(c)?m(""):m("Please enter a valid phone number")),p({...s,[r]:c})},f=async a=>{if(a.preventDefault(),d()===!1||i()===!1||s.username.trim()===""||s.password.trim()===""||s.confirmPassword.trim()===""||s.fullName.trim()===""||s.phone.trim()===""||s.email.trim()===""||s.address.trim()===""||h!=="")u.warning("Please fill in all fields");else try{const r=await j(s.username,s.password,s.fullName,s.phone,s.email,s.address);u("Account created successfully"),setTimeout(()=>{g("/login")},1e3)}catch(r){r.response?(t(r.response.data.message),setTimeout(()=>{t("")},3e3)):r.request?t(""):t("Something went wrong")}};return e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row mt-5",children:[e.jsx("h4",{className:"text-center mb-5",children:"REGISTER"}),e.jsx("div",{className:"col-lg-3"}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("form",{action:"",method:"",onSubmit:f,children:[e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",className:"",id:"username",placeholder:"Username",name:"username",required:!0,onChange:n,value:s.username})}),e.jsx("div",{className:"form-group mt-3",children:e.jsx("input",{type:"password",className:"",id:"pwd",placeholder:"Password",name:"password",required:!0,autoComplete:"off",onChange:n,value:s.password})}),e.jsxs("div",{className:"form-group mt-3",children:[e.jsx("input",{type:"password",className:"",id:"confirmPassword",placeholder:"Confirm Password",name:"confirmPassword",required:!0,autoComplete:"off",onKeyUp:d,onChange:n,value:s.confirmPassword}),e.jsx("p",{children:e.jsx("span",{id:"passwordMsg",className:"msg"})})]}),e.jsx("div",{className:"form-group mt-3",children:e.jsx("input",{type:"text",className:"",id:"fullName",placeholder:"Full Name",name:"fullName",required:!0,onChange:n,value:s.fullName})}),e.jsxs("div",{className:"form-group mt-3",children:[e.jsx("input",{type:"text",className:"",id:"phone",placeholder:"Phone Number",name:"phone",required:!0,onChange:n,onKeyUp:i,value:s.phone}),e.jsx("p",{children:e.jsx("span",{id:"phoneMsg",className:"msg"})})]}),e.jsx("div",{className:"form-group mt-3",children:e.jsx("input",{type:"email",className:"",id:"email",placeholder:"Email",name:"email",required:!0,onChange:n,value:s.email})}),e.jsx("div",{className:"form-group mt-3",children:e.jsx("input",{type:"text",className:"",id:"address",placeholder:"Address",name:"address",required:!0,onChange:n,value:s.address})}),e.jsxs("div",{className:"mt-3",children:["Already have an account?"," ",e.jsx("a",{className:"register",href:"/login",children:"Log in"})]}),o&&e.jsx("p",{className:"alert alert-danger",children:o}),e.jsx("button",{type:"submit",className:"login-btn mt-3",children:"SIGN UP"}),e.jsx(N,{})]})}),e.jsx("div",{className:"col-lg-3"})]})})};export{y as default};
